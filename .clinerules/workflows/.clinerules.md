# Cline's Vibe Coding Rulebook (.clinerules.md)

**Version:** 1.1
**Last Updated:** June 4, 2025
**Purpose:** This document outlines the rules, processes, and best practices for "Vibe Coding" â€“ a collaborative software development methodology involving human developers and Cline, an AI software engineering assistant. It emphasizes clear communication, robust context management, iterative development, and quality assurance. Adherence to these rules is critical for Cline's effective operation due to its session-based memory.

---

## Table of Contents

1.  [Introduction: The Essence of Vibe Coding with Cline](#introduction-the-essence-of-vibe-coding-with-cline)
2.  [Core Tenet: Cline's Memory Bank - Context Management](#core-tenet-clines-memory-bank---context-management)
3.  [Phase 1: Establishing the Vision - Product Requirements Document (PRD)](#phase-1-establishing-the-vision---product-requirements-document-prd)
4.  [Phase 2: Breaking Down the Vision - Task Generation](#phase-2-breaking-down-the-vision---task-generation)
5.  [Phase 3: Bringing the Vision to Life - Task Processing & Implementation](#phase-3-bringing-the-vision-to-life---task-processing--implementation)
6.  [Phase 4: Ensuring Quality - Automated Testing](#phase-4-ensuring-quality---automated-testing)
7.  [Phase 5: Collaboration and Versioning - Source Control with GitHub](#phase-5-collaboration-and-versioning---source-control-with-github)
8.  [Continuous Improvement: The Vibe Coding Loop](#continuous-improvement-the-vibe-coding-loop)

---

## 1. Introduction: The Essence of Vibe Coding with Cline

Vibe Coding is a software development approach centered on a synergistic collaboration between human developers and Cline. Its core principles are:

* **AI-Human Collaboration:** Leveraging the strengths of both human insight and AI efficiency.
* **Context is King:** Recognizing Cline's session-based memory, maintaining a perfect, shared understanding through the "Memory Bank" and associated working documents (PRDs, Task Lists) is paramount.
* **Iterative Development:** Building software in manageable increments, guided by clear requirements and tasks.
* **Documentation-Driven:** Using PRDs, Task Lists, and the Memory Bank as the source of truth and the primary means of communication and context preservation.
* **Quality First:** Integrating testing and version control deeply into the workflow.

**Cline's Operational Model:** Cline is an expert software engineer whose memory resets completely between sessions. After each reset, Cline relies *entirely* on its Memory Bank and the referenced working documents to understand the project and continue work effectively. This rulebook is designed to support this operational model.

---

## 2. Core Tenet: Cline's Memory Bank - Context Management

*Source: Adapted from `memory-bank.md`, `create-prd.md`, `process-task-list.md`*

The Memory Bank, in conjunction with actively referenced PRD and Task List files, is the single source of truth for Cline. Its meticulous maintenance and correct referencing are non-negotiable.

* **Rule: MEM01 - Mandatory Memory Bank & Working Document Review:** Cline *MUST* read ALL core Memory Bank files and the specific PRD and Task List files referenced in `activeContext.md` at the start of *EVERY* task, session, or significant context switch. This is not optional.

* **Rule: MEM02 - Memory Bank Structure and Purpose:** The Memory Bank consists of core Markdown files that provide foundational and operational context. It works hand-in-hand with feature-specific PRD and Task List files typically stored in the `/tasks/` directory.

    ```mermaid
    flowchart TD
        subgraph FoundationalMemory [Memory Bank: Foundational Context]
            direction LR
            PO[project-overview.md]
            PCO[productContext.md]
            SP[systemPatterns.md]
            TC[techContext.md]
        end

        subgraph OperationalMemory [Memory Bank: Operational Context]
            direction LR
            AC[activeContext.md]
            FPS[feature-progress-summary.md]
        end
        
        subgraph WorkingFiles [External Working Documents (e.g., in /tasks/)]
            direction LR
            PRD[prd-[feature-name].md]
            TASKS[tasks-[feature-name].md]
        end

        FoundationalMemory -->|Inform| AC

        AC -->|References Current| PRD
        AC -->|References Current & Tracks Active Sub-task From| TASKS
        
        PRD ---->|Defines Scope For| TASKS
        TASKS -- Task Completion Updates & Learnings --> AC
        TASKS -- Feature Completion Status --> FPS
        AC -- Session Learnings & Overall Status --> FPS
    ```

    * **Core Memory Bank Files (Required):**
        1.  `project-overview.md` (Optional, for multi-feature projects): High-level project vision, long-term goals, overall scope. More static.
        2.  `productContext.md`: The "why" of the overall project or primary product. Problems it solves, overarching user experience goals. More static.
        3.  `systemPatterns.md`: System-wide architecture, key global technical decisions, established design patterns, core component relationships. Relatively static but updated with major architectural shifts.
        4.  `techContext.md`: Core technologies used across the project, development environment setup, global technical constraints, key dependencies, and standard tool usage patterns. Relatively static.
        5.  `activeContext.md`: **The most dynamic Memory Bank file.** This is Cline's operational hub for the current session/task. It *MUST* contain:
            * **Pointer to the current `prd-[feature-name].md`:** Full path to the Product Requirements Document for the feature currently under development.
            * **Pointer to the current `tasks-[feature-name].md`:** Full path to the Task List document for the current feature.
            * **Current Active Sub-task:** The specific ID and description of the sub-task Cline is currently working on or has just completed from the `tasks-[feature-name].md`.
            * Recent critical decisions, clarifications, or temporary notes relevant to the active sub-task.
            * Key learnings, insights, or newly identified patterns from the current task *before* they are potentially refactored into `systemPatterns.md` or `techContext.md`.
            * Any immediate blockers or open questions related to the current sub-task.
        6.  `feature-progress-summary.md`: A higher-level log of project progress. Tracks completed features (linking to their respective `prd-[feature-name].md` and `tasks-[feature-name].md`), major milestones achieved, and potentially the status of larger, ongoing epics. Updated as features are completed.

    * **Key Working Documents (Externally Stored, e.g., in `/tasks/`):**
        * `prd-[feature-name].md`: The detailed Product Requirements Document for a specific feature. Generated as per **Phase 1 (Rule PRD01-PRD06)**. This is the source of truth for *what* to build for the feature.
        * `tasks-[feature-name].md`: The detailed, step-by-step task list for implementing the feature defined in the corresponding PRD. Generated as per **Phase 2 (Rule TSK01-TSK06)**. This document is *actively updated* by Cline to mark sub-tasks and parent tasks as `[x]` upon completion, as per **Phase 3 (Rule IMPL02)**. It serves as the primary record of granular progress for the feature.

* **Rule: MEM03 - Cline's Workflows (Revised Focus):**
    * **Plan Mode (Initial Task/Session Setup):**
        ```mermaid
        flowchart TD
            Start[Start] --> ReadCoreMB[Read Core Memory Bank Files]
            ReadCoreMB --> CheckActiveCtx{activeContext.md points to relevant PRD/Tasks?}
            CheckActiveCtx -->|Yes| LoadWorkDocs[Load Referenced prd.md & tasks.md]
            LoadWorkDocs --> Verify[Verify Understanding with User]
            Verify --> Strategy[Develop Implementation Strategy]
            Strategy --> Present[Present Approach to User]
            CheckActiveCtx -->|No / New Feature| InitFeature[User Interaction: Initiate PRD/Task Creation for New Feature]
            InitFeature --> UpdateAC[Update activeContext.md with new PRD/Task paths]
            UpdateAC --> LoadWorkDocs
        ```
    * **Act Mode (Task Execution):**
        ```mermaid
        flowchart TD
            StartTask[Start Specific Sub-Task from tasks-[feature].md] --> ReviewAC[Review activeContext.md & relevant sections of current PRD/Tasks]
            ReviewAC --> Execute[Execute Sub-Task]
            Execute --> UpdateTaskDoc[Update tasks-[feature].md (mark complete)]
            UpdateTaskDoc --> UpdateAC[Update activeContext.md (current sub-task, learnings)]
            UpdateAC --> UserConfirm{Inform User & Confirm Next Step}
        ```

* **Rule: MEM04 - Triggers for Memory Bank & Working Document Updates:**
    1.  **`tasks-[feature-name].md`:** Updated *immediately* after each sub-task (and subsequently parent task) is completed (Rule IMPL02).
    2.  **`activeContext.md`:** Updated after each sub-task completion (to reflect the next active sub-task, learnings), when new critical decisions are made, or when context needs clarification. *Must be current before ending a session.*
    3.  Discovery of new project patterns or significant learnings (may lead to updates in `activeContext.md` initially, then potentially `systemPatterns.md` or `techContext.md`).
    4.  After implementing significant changes or completing a parent task (triggers updates in `tasks-[feature-name].md` and `activeContext.md`).
    5.  When the user explicitly requests with "**update memory bank**" (Cline *MUST* review ALL core Memory Bank files and the currently referenced PRD/Task List, then update `activeContext.md` and other files as needed).
    6.  `feature-progress-summary.md`: Updated when a whole feature (all parent tasks in its `tasks-[feature-name].md`) is completed.
    7.  Before creating a Pull Request (ensure `activeContext.md` and the relevant `tasks-[feature-name].md` are accurate).

* **Rule: MEM05 - Memory Bank & Working Document Update Protocol:** When an update is triggered (especially for `activeContext.md` or a general review):
    ```mermaid
    flowchart TD
        StartUpdate[Update Process Triggered]
        subgraph Process
            P1[Review Core Memory Bank Files]
            P1a[Review Current prd-[feature].md & tasks-[feature].md]
            P2[Update tasks-[feature].md with any completions]
            P3[Update activeContext.md: current task, pointers, learnings, decisions]
            P4[Update feature-progress-summary.md if a feature is complete]
            P5[Consider updates to foundational files (systemPatterns, techContext) if new global patterns emerge]
            
            P1 --> P1a --> P2 --> P3 --> P4 --> P5
        end
        StartUpdate --> Process
    ```
    *Focus particularly on ensuring `activeContext.md` accurately reflects the current state and correctly points to the active `prd-[feature-name].md` and `tasks-[feature-name].md`.*

* **Rule: MEM06 - Persisting Context for Vibe Coding:** All significant architectural decisions, user feedback, critical learnings, unresolved questions, and the precise current state of development (which sub-task is active, what's completed in `tasks-[feature-name].md`) *must* be meticulously documented in `activeContext.md` and the relevant `tasks-[feature-name].md` *before* Cline ends a session, switches major tasks, or considers a feature complete. This ensures the "vibe" (shared context) is preserved.

---

## 3. Phase 1: Establishing the Vision - Product Requirements Document (PRD)

*Source: Adapted from `create-prd.md`*

A clear PRD is the foundation for successful feature development.

* **Rule: PRD01 - Initial Prompt and Clarification:**
    1.  User provides an initial prompt for a new feature/functionality.
    2.  Cline *MUST* ask clarifying questions to gather sufficient detail *before* writing the PRD. The goal is to understand the "what" and "why."
    3.  Example Question Areas: Problem/Goal, Target User, Core Functionality, User Stories, Acceptance Criteria, Scope/Non-Goals, Data Requirements, Design/UI, Edge Cases.

* **Rule: PRD02 - PRD Generation and Structure:** Based on the prompt and clarifications, Cline generates a PRD in Markdown.
    * **PRD Structure:**
        1.  **Introduction/Overview:** Feature description, problem solved, goal.
        2.  **Goals:** Specific, measurable objectives.
        3.  **User Stories:** (e.g., "As a [user type], I want to [action] so that [benefit].")
        4.  **Functional Requirements:** Numbered list of specific functionalities (e.g., "The system must...").
        5.  **Non-Goals (Out of Scope):** What the feature will *not* include.
        6.  **Design Considerations (Optional):** Links to mockups, UI/UX notes.
        7.  **Technical Considerations (Optional):** Constraints, dependencies, integration points.
        8.  **Success Metrics:** How feature success will be measured.
        9.  **Open Questions:** Remaining areas needing clarification.

* **Rule: PRD03 - PRD Storage and Naming:**
    * **Format:** Markdown (`.md`)
    * **Location:** `/tasks/` (or a dedicated `/prds/` or `/features/[feature-name]/` directory, path must be recorded in `activeContext.md` and potentially `memory-bank/techContext.md` for general convention)
    * **Filename:** `prd-[feature-name].md` (e.g., `prd-user-authentication.md`)

* **Rule: PRD04 - Target Audience:** Assume the PRD is for a **junior developer**. Requirements must be explicit, unambiguous, and avoid unnecessary jargon.

* **Rule: PRD05 - PRD as Living Document:** The PRD can be updated if requirements change, but all changes must be agreed upon with the user and documented. Cline should prompt for PRD updates if new information contradicts it. The path in `activeContext.md` must always point to the latest version.

* **Rule: PRD06 - User Approval & `activeContext.md` Update:** After drafting the PRD, Cline presents it for user approval. Once approved, Cline *must* ensure `activeContext.md` is updated to point to this PRD if it's the current focus. Do NOT proceed to task generation without PRD approval.

---

## 4. Phase 2: Breaking Down the Vision - Task Generation

*Source: Adapted from `generate-tasks.md`*

Convert the approved PRD into an actionable task list.

* **Rule: TSK01 - PRD Analysis for Task Creation:** Cline receives a reference to an approved `prd-[feature-name].md` file (typically from `activeContext.md`) and analyzes its functional requirements, user stories, and other sections.

* **Rule: TSK02 - Phased Task Generation:**
    1.  **Phase 1: Generate Parent Tasks:**
        * Based on PRD analysis, Cline creates the `tasks-[feature-name].md` file and generates main, high-level parent tasks.
        * Cline presents these parent tasks to the user.
        * Cline informs the user: "I have generated the high-level tasks in `tasks-[feature-name].md` based on the PRD. Ready to generate the sub-tasks? Respond with 'Go' or 'Proceed' to continue."
    2.  **Wait for Confirmation:** Cline pauses for user confirmation.
    3.  **Phase 2: Generate Sub-Tasks:**
        * Once confirmed, Cline breaks down each parent task into smaller, actionable sub-tasks within the `tasks-[feature-name].md` file.

* **Rule: TSK03 - Task List Structure and Content (`tasks-[feature-name].md`):**
    ```markdown
    # Task List for: [PRD Feature Name]

    **PRD Reference:** `path/to/prd-[feature-name].md` (Should match pointer in activeContext.md)

    ## Relevant Files & Test Strategy
    *This section will be updated during implementation.*
    - `src/components/feature/NewComponent.js` - Main UI component.
    - `src/components/feature/NewComponent.test.js` - Unit tests.
    - ...

    ### Notes on Testing
    - ...
    - Run tests using: `npm test` (or as per `memory-bank/techContext.md`).

    ## Tasks

    - [ ] 1.0 Parent Task Title
      - [ ] 1.1 [Sub-task description 1.1]
      - [ ] 1.2 [Sub-task description 1.2]
    - ...
    ```

* **Rule: TSK04 - Task List Storage and Naming:**
    * **Format:** Markdown (`.md`)
    * **Location:** `/tasks/` (consistent with PRD location, path recorded in `activeContext.md`)
    * **Filename:** `tasks-[prd-file-name-base].md` (e.g., `tasks-user-authentication.md`)

* **Rule: TSK05 - Identifying Relevant Files and Test Stubs:** During sub-task generation, Cline identifies potential files and suggests test stubs in the "Relevant Files" section of `tasks-[feature-name].md`.

* **Rule: TSK06 - User Approval & `activeContext.md` Update:** After generating the full task list, Cline presents it for user approval. Once approved, Cline *must* ensure `activeContext.md` is updated to point to this `tasks-[feature-name].md` and to note the first sub-task as active. Do NOT start implementation without task list approval.

---

## 5. Phase 3: Bringing the Vision to Life - Task Processing & Implementation

*Source: Adapted from `process-task-list.md`*

Systematic execution of tasks from `tasks-[feature-name].md` is key.

* **Rule: IMPL01 - Sequential Sub-task Implementation:**
    * Cline implements **one sub-task at a time** from the `tasks-[feature-name].md` referenced in `activeContext.md`.
    * Before starting the *next* sub-task, Cline *MUST* ask the user for permission/go-ahead.

* **Rule: IMPL02 - Task Completion Protocol (Updating `tasks-[feature-name].md`):**
    1.  When Cline finishes a **sub-task**, it immediately updates the `tasks-[feature-name].md` file, changing `[ ]` to `[x]` for that sub-task.
    2.  If **all** sub-tasks under a parent task in `tasks-[feature-name].md` are marked `[x]`, Cline also marks the **parent task** as `[x]`.
    3.  Cline informs the user of the completion and the update to `tasks-[feature-name].md`.
    4.  Cline then updates `activeContext.md` to reflect the next sub-task (or completion if no tasks remain for the current feature).

* **Rule: IMPL03 - Continuous Task List (`tasks-[feature-name].md`) Maintenance:**
    * The `tasks-[feature-name].md` file is the ground truth for implementation progress for that feature.
    * Cline updates it regularly per IMPL02.
    * If new tasks/sub-tasks are discovered, Cline proposes them to the user, and upon approval, adds them to the current `tasks-[feature-name].md`.

* **Rule: IMPL04 - Updating "Relevant Files" Section in `tasks-[feature-name].md`:** As Cline creates or modifies files, it *must* update the "Relevant Files" section in the active `tasks-[feature-name].md`.

* **Rule: IMPL05 - AI Pre-computation Check:** Before starting any work on a sub-task, Cline re-reads the sub-task description from `tasks-[feature-name].md`, relevant sections of the associated `prd-[feature-name].md`, and the full `activeContext.md`.

* **Rule: IMPL06 - Code Implementation Standards:**
    * Adhere to standards in `memory-bank/techContext.md`.

---

## 6. Phase 4: Ensuring Quality - Automated Testing

Automated tests are crucial.

* **Rule: TEST01 - TDD/BDD Encouraged:** Tests should reflect PRD acceptance criteria.

* **Rule: TEST02 - Test File Colocation and Naming:** Per `memory-bank/techContext.md`.

* **Rule: TEST03 - Comprehensive Test Coverage:** Unit, Integration, E2E.

* **Rule: TEST04 - Test Automation and Execution:** Per `memory-bank/techContext.md`.

* **Rule: TEST05 - PRD and Task Conformance in Tests:** Tests map to `prd-[feature-name].md` requirements and `tasks-[feature-name].md` objectives.

* **Rule: TEST06 - Cline's Role in Testing:**
    * Assist generating test boilerplate.
    * Identify/write test cases.
    * Write/update tests after coding a sub-task.
    * Run/prompt user to run tests; report results.
    * Debug/fix with user involvement if stuck.
    * Update `activeContext.md` with test status for current sub-task, and `feature-progress-summary.md` upon feature completion.

---

## 7. Phase 5: Collaboration and Versioning - Source Control with GitHub

Effective source control is essential.

* **Rule: GIT01 - Feature Branches:** Based on `prd-[feature-name].md`.

* **Rule: GIT02 - Atomic Commits:** Ideally per sub-task from `tasks-[feature-name].md`.

* **Rule: GIT03 - Clear Commit Messages:** Reference task IDs from `tasks-[feature-name].md`.

* **Rule: GIT04 - Regular Pushes:**

* **Rule: GIT05 - Pull Requests (PRs/MRs):** When all tasks in `tasks-[feature-name].md` are complete.

* **Rule: GIT06 - PR Description:** Link to `prd-[feature-name].md` and `tasks-[feature-name].md`.

* **Rule: GIT07 - Code Reviews:**

* **Rule: GIT08 - Cline's Interaction with Git:** Update `activeContext.md` with branch, commit hash, PR status.

* **Rule: GIT09 - Handling Merge Conflicts:**

---

## 8. Continuous Improvement: The Vibe Coding Loop

Vibe Coding is an evolving process.

* **Rule: LOOP01 - Feedback Integration:** Update PRD, `tasks-[feature-name].md`, Memory Bank files, and code.

* **Rule: LOOP02 - Memory Bank & Working Document Refinement:** Periodically review and refine all Memory Bank files, and ensure `activeContext.md` correctly points to the latest versions of active PRDs/Task Lists.

* **Rule: LOOP03 - Rulebook Evolution:** This `.clinerules.md` document itself is subject to evolution.

---
**End of Cline's Vibe Coding Rulebook**
